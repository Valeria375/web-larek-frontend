(()=>{"use strict";function isSelector(t){return"string"==typeof t&&t.length>1}function ensureElement(t,r){if(isSelector(t)){var o=function ensureAllElements(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;if(isSelector(t))return Array.from(r.querySelectorAll(t));if(t instanceof NodeList)return Array.from(t);if(Array.isArray(t))return t;throw new Error("Unknown selector element")}(t,r);if(o.length>1&&console.warn("selector ".concat(t," return more then one element")),0===o.length)throw new Error("selector ".concat(t," return nothing"));return o.pop()}if(t instanceof HTMLElement)return t;throw new Error("Unknown selector element")}function cloneTemplate(t){return ensureElement(t).content.firstElementChild.cloneNode(!0)}var t="".concat("","/api/weblarek"),r="".concat("","/content/weblarek");function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _defineProperties(t,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(a=i.key,l=void 0,l=function _toPrimitive(t,r){if("object"!==_typeof(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,r||"default");if("object"!==_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(a,"string"),"symbol"===_typeof(l)?l:String(l)),i)}var a,l}var o=function(){function EventEmitter(){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,EventEmitter),this._events=new Map}return function _createClass(t,r,o){return r&&_defineProperties(t.prototype,r),o&&_defineProperties(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}(EventEmitter,[{key:"on",value:function on(t,r){var o;this._events.has(t)||this._events.set(t,new Set),null===(o=this._events.get(t))||void 0===o||o.add(r)}},{key:"off",value:function off(t,r){var o;this._events.has(t)&&(this._events.get(t).delete(r),0===(null===(o=this._events.get(t))||void 0===o?void 0:o.size)&&this._events.delete(t))}},{key:"emit",value:function emit(t,r){this._events.forEach((function(o,i){(i instanceof RegExp&&i.test(t)||i===t)&&o.forEach((function(t){return t(r)}))}))}},{key:"onAll",value:function onAll(t){this.on("*",t)}},{key:"offAll",value:function offAll(){this._events=new Map}},{key:"trigger",value:function trigger(t,r){var o=this;return function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o.emit(t,Object.assign(Object.assign({},i||{}),r||{}))}}}]),EventEmitter}();function api_typeof(t){return api_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},api_typeof(t)}function api_defineProperties(t,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(a=i.key,l=void 0,l=function api_toPrimitive(t,r){if("object"!==api_typeof(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,r||"default");if("object"!==api_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(a,"string"),"symbol"===api_typeof(l)?l:String(l)),i)}var a,l}function src_api_typeof(t){return src_api_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},src_api_typeof(t)}function src_api_defineProperties(t,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(a=i.key,l=void 0,l=function src_api_toPrimitive(t,r){if("object"!==src_api_typeof(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,r||"default");if("object"!==src_api_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(a,"string"),"symbol"===src_api_typeof(l)?l:String(l)),i)}var a,l}function _setPrototypeOf(t,r){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,r){return t.__proto__=r,t},_setPrototypeOf(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var o,i=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;o=Reflect.construct(i,arguments,a)}else o=i.apply(this,arguments);return function _possibleConstructorReturn(t,r){if(r&&("object"===src_api_typeof(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,o)}}function _getPrototypeOf(t){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},_getPrototypeOf(t)}var i=function(t){!function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&_setPrototypeOf(t,r)}(ProductAPI,t);var r=_createSuper(ProductAPI);function ProductAPI(t,o,i){var a;return function src_api_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,ProductAPI),(a=r.call(this,o,i)).cdn=t,a}return function src_api_createClass(t,r,o){return r&&src_api_defineProperties(t.prototype,r),o&&src_api_defineProperties(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}(ProductAPI,[{key:"getCardList",value:function getCardList(){var t=this;return this.get("/product").then((function(r){return r.items.map((function(r){return Object.assign(Object.assign({},r),{image:t.cdn+r.image})}))}))}},{key:"getCardItem",value:function getCardItem(t){return this.get("/product/".concat(t)).then((function(t){return Object.assign(Object.assign({},t),{description:t.description})}))}},{key:"getOpenCard",value:function getOpenCard(t){return this.get("/product/".concat(t)).then((function(t){return t}))}},{key:"orderProduct",value:function orderProduct(t){return this.post("/order",{items:t.items,payment:t.payment,email:t.email,phone:t.phone,address:t.address,total:t.total}).then((function(t){return t}))}}]),ProductAPI}(function(){function Api(t){var r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function api_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,Api),this.baseUrl=t,this.options={headers:Object.assign({"Content-Type":"application/json"},null!==(r=o.headers)&&void 0!==r?r:{})}}return function api_createClass(t,r,o){return r&&api_defineProperties(t.prototype,r),o&&api_defineProperties(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}(Api,[{key:"handleResponse",value:function handleResponse(t){return t.ok?t.json():t.json().then((function(r){var o;return Promise.reject(null!==(o=r.error)&&void 0!==o?o:t.statusText)}))}},{key:"get",value:function get(t){return fetch(this.baseUrl+t,Object.assign(Object.assign({},this.options),{method:"GET"})).then(this.handleResponse)}},{key:"post",value:function post(t,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"POST";return fetch(this.baseUrl+t,Object.assign(Object.assign({},this.options),{method:o,body:JSON.stringify(r)})).then(this.handleResponse)}}]),Api}());function modal_typeof(t){return modal_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},modal_typeof(t)}function modal_defineProperties(t,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(a=i.key,l=void 0,l=function modal_toPrimitive(t,r){if("object"!==modal_typeof(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,r||"default");if("object"!==modal_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(a,"string"),"symbol"===modal_typeof(l)?l:String(l)),i)}var a,l}var a=function(){function Modal(){!function modal_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,Modal),this.container=ensureElement("#modal-container"),this._closeButton=ensureElement(".modal__close",this.container),this._content=ensureElement(".modal__content",this.container),this._closeButton.addEventListener("click",this.close.bind(this))}return function modal_createClass(t,r,o){return r&&modal_defineProperties(t.prototype,r),o&&modal_defineProperties(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}(Modal,[{key:"content",set:function set(t){this._content.replaceChildren(t)}},{key:"preOpenCallBack",value:function preOpenCallBack(){}},{key:"open",value:function open(){this.preOpenCallBack(),this.container.classList.add("modal_active")}},{key:"close",value:function close(){this.container.classList.remove("modal_active"),this._content.innerHTML=""}}]),Modal}();function modalBasket_typeof(t){return modalBasket_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},modalBasket_typeof(t)}function modalBasket_defineProperties(t,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(a=i.key,l=void 0,l=function modalBasket_toPrimitive(t,r){if("object"!==modalBasket_typeof(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,r||"default");if("object"!==modalBasket_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(a,"string"),"symbol"===modalBasket_typeof(l)?l:String(l)),i)}var a,l}function modalBasket_setPrototypeOf(t,r){return modalBasket_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,r){return t.__proto__=r,t},modalBasket_setPrototypeOf(t,r)}function modalBasket_createSuper(t){var r=function modalBasket_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var o,i=modalBasket_getPrototypeOf(t);if(r){var a=modalBasket_getPrototypeOf(this).constructor;o=Reflect.construct(i,arguments,a)}else o=i.apply(this,arguments);return function modalBasket_possibleConstructorReturn(t,r){if(r&&("object"===modalBasket_typeof(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function modalBasket_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,o)}}function modalBasket_getPrototypeOf(t){return modalBasket_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},modalBasket_getPrototypeOf(t)}var l=function(t){!function modalBasket_inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&modalBasket_setPrototypeOf(t,r)}(modalBasket,t);var r=modalBasket_createSuper(modalBasket);function modalBasket(){var t;return function modalBasket_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,modalBasket),(t=r.call(this)).events=new o,t}return function modalBasket_createClass(t,r,o){return r&&modalBasket_defineProperties(t.prototype,r),o&&modalBasket_defineProperties(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}(modalBasket,[{key:"preOpenCallBack",value:function preOpenCallBack(){var t=ensureElement("#basket");this.basketTemp=cloneTemplate(t),this.basketContent=ensureElement(".basket__list",this.basketTemp),this.basketPriceHTMLElement=ensureElement(".basket__price",this.basketTemp),this.busketOrderButton=ensureElement(".button",this.basketTemp),this.itemCount=0,this.totalPrice=0,this._content.appendChild(this.basketTemp),this.updateOrderButtonState();this.orderInfo={total:0,items:[]}}},{key:"addItemInterface",value:function addItemInterface(t){var r=this;this.orderInfo.items.push(t.id),this.itemCount++;var o=cloneTemplate(ensureElement("#card-basket")),i=ensureElement(".basket__item-index",o),a=ensureElement(".card__price",o),l=ensureElement(".card__title",o),c=ensureElement(".basket__item-delete",o);i.innerText=String(this.itemCount),l.innerText=t.title,a.innerText=String(t.price)+" синапсов",this.totalPrice+=t.price,this.basketContent.appendChild(o),this.basketPriceHTMLElement.innerText=String(this.totalPrice)+" синапсов",c.addEventListener("click",(function(){r.removeItem(o,t.price,t),r.events.emit("deleteCardFromBasket",t)})),this.updateOrderButtonState()}},{key:"removeItem",value:function removeItem(t,r,o){var i=this.orderInfo.items.indexOf(o.id,0);i>-1&&this.orderInfo.items.splice(i,1),this.itemCount--,this.totalPrice-=r,this.basketPriceHTMLElement.innerText=String(this.totalPrice)+" синапсов",Array.from(this.basketContent.children).forEach((function(t,r){ensureElement(".basket__item-index",t).innerText=String(r+1)})),this.basketContent.removeChild(t),this.updateOrderButtonState()}},{key:"init",value:function init(){this.events.emit("onLoard")}},{key:"orderButton",value:function orderButton(){}},{key:"updateOrderButtonState",value:function updateOrderButtonState(){this.itemCount>0?this.busketOrderButton.disabled=!1:(this.busketOrderButton.disabled=!0,this.orderButtonClick())}},{key:"orderButtonClick",value:function orderButtonClick(){var t=this;this.busketOrderButton.addEventListener("click",(function(){t.close(),t.orderInfo.total=t.totalPrice,t.events.emit("confirm",t.orderInfo)}))}}]),modalBasket}(a);function modalBasketPresenter_typeof(t){return modalBasketPresenter_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},modalBasketPresenter_typeof(t)}function modalBasketPresenter_createForOfIteratorHelper(t,r){var o="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!o){if(Array.isArray(t)||(o=function modalBasketPresenter_unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return modalBasketPresenter_arrayLikeToArray(t,r);var o=Object.prototype.toString.call(t).slice(8,-1);"Object"===o&&t.constructor&&(o=t.constructor.name);if("Map"===o||"Set"===o)return Array.from(t);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return modalBasketPresenter_arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){o&&(t=o);var i=0,a=function F(){};return{s:a,n:function n(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function e(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){o=o.call(t)},n:function n(){var t=o.next();return c=t.done,t},e:function e(t){u=!0,l=t},f:function f(){try{c||null==o.return||o.return()}finally{if(u)throw l}}}}function modalBasketPresenter_arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var o=0,i=new Array(r);o<r;o++)i[o]=t[o];return i}function modalBasketPresenter_defineProperties(t,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(a=i.key,l=void 0,l=function modalBasketPresenter_toPrimitive(t,r){if("object"!==modalBasketPresenter_typeof(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,r||"default");if("object"!==modalBasketPresenter_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(a,"string"),"symbol"===modalBasketPresenter_typeof(l)?l:String(l)),i)}var a,l}var c=function(){function modalBasketPresenter(t,r){!function modalBasketPresenter_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,modalBasketPresenter),this.viewRef=t,this.modelRef=r,this.viewRef.events.on("onLoard",this.formLoardCallBack.bind(this)),this.viewRef.events.on("deleteCardFromBasket",this.deleteItemCallBack.bind(this))}return function modalBasketPresenter_createClass(t,r,o){return r&&modalBasketPresenter_defineProperties(t.prototype,r),o&&modalBasketPresenter_defineProperties(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}(modalBasketPresenter,[{key:"formLoardCallBack",value:function formLoardCallBack(){var t,r=modalBasketPresenter_createForOfIteratorHelper(this.modelRef.getBasketList());try{for(r.s();!(t=r.n()).done;){var o=t.value;this.viewRef.addItemInterface(o)}}catch(t){r.e(t)}finally{r.f()}}},{key:"deleteItemCallBack",value:function deleteItemCallBack(t){this.modelRef.removeFromBasket(t)}}]),modalBasketPresenter}();function modalContact_typeof(t){return modalContact_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},modalContact_typeof(t)}function modalContact_defineProperties(t,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(a=i.key,l=void 0,l=function modalContact_toPrimitive(t,r){if("object"!==modalContact_typeof(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,r||"default");if("object"!==modalContact_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(a,"string"),"symbol"===modalContact_typeof(l)?l:String(l)),i)}var a,l}function modalContact_setPrototypeOf(t,r){return modalContact_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,r){return t.__proto__=r,t},modalContact_setPrototypeOf(t,r)}function modalContact_createSuper(t){var r=function modalContact_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var o,i=modalContact_getPrototypeOf(t);if(r){var a=modalContact_getPrototypeOf(this).constructor;o=Reflect.construct(i,arguments,a)}else o=i.apply(this,arguments);return function modalContact_possibleConstructorReturn(t,r){if(r&&("object"===modalContact_typeof(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function modalContact_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,o)}}function modalContact_getPrototypeOf(t){return modalContact_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},modalContact_getPrototypeOf(t)}var u=function(t){!function modalContact_inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&modalContact_setPrototypeOf(t,r)}(ModalContact,t);var r=modalContact_createSuper(ModalContact);function ModalContact(){var t;return function modalContact_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,ModalContact),(t=r.call(this)).events=new o,t}return function modalContact_createClass(t,r,o){return r&&modalContact_defineProperties(t.prototype,r),o&&modalContact_defineProperties(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}(ModalContact,[{key:"preOpenCallBack",value:function preOpenCallBack(){var t=this,r=ensureElement("#contacts");this.contacts=cloneTemplate(r),this.emailInput=ensureElement("#email",this.contacts),this.phoneInput=ensureElement("#phone",this.contacts),this.emailInput.addEventListener("input",(function(){t.updatePayButtonState()})),this.phoneInput.addEventListener("input",(function(){t.updatePayButtonState()})),this.payButton=ensureElement("#pay",this.contacts),this.payButton.addEventListener("click",(function(){t.close();var r={email:t.emailInput.value,phone:t.phoneInput.value,address:t.modalInfo.address,payment:t.modalInfo.payment,total:t.modalInfo.total,items:t.modalInfo.items};t.events.emit("completeCallBack",r)})),this.updatePayButtonState(),this._content.appendChild(this.contacts)}},{key:"updatePayButtonState",value:function updatePayButtonState(){""===this.emailInput.value||""===this.phoneInput.value?this.payButton.disabled=!0:this.payButton.disabled=!1}},{key:"email",set:function set(t){this.emailInput.value=t,this.updatePayButtonState()}},{key:"phone",set:function set(t){this.phoneInput.value=t,this.updatePayButtonState()}},{key:"openModalSuccess",value:function openModalSuccess(){this.events.emit("openModalSuccess",this.modalInfo)}},{key:"openInfo",value:function openInfo(t){this.modalInfo=t,this.open()}}]),ModalContact}(a);function modalContactPresenter_typeof(t){return modalContactPresenter_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},modalContactPresenter_typeof(t)}function modalContactPresenter_defineProperties(t,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(a=i.key,l=void 0,l=function modalContactPresenter_toPrimitive(t,r){if("object"!==modalContactPresenter_typeof(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,r||"default");if("object"!==modalContactPresenter_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(a,"string"),"symbol"===modalContactPresenter_typeof(l)?l:String(l)),i)}var a,l}var p=function(){function modalContactPresenter(t,r){!function modalContactPresenter_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,modalContactPresenter),this.modelRef=r,this.viewRef=t,this.viewRef.events.on("completeCallBack",this.completeCallBack.bind(this))}return function modalContactPresenter_createClass(t,r,o){return r&&modalContactPresenter_defineProperties(t.prototype,r),o&&modalContactPresenter_defineProperties(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}(modalContactPresenter,[{key:"completeCallBack",value:function completeCallBack(t){var r=this;console.log(t),this.modelRef.sendOrder(t).then((function(t){r.viewRef.openModalSuccess(),r.modelRef.clearBasket()}),(function(t){console.log("error order")}))}}]),modalContactPresenter}();function modalOrder_typeof(t){return modalOrder_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},modalOrder_typeof(t)}function modalOrder_defineProperties(t,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(a=i.key,l=void 0,l=function modalOrder_toPrimitive(t,r){if("object"!==modalOrder_typeof(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,r||"default");if("object"!==modalOrder_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(a,"string"),"symbol"===modalOrder_typeof(l)?l:String(l)),i)}var a,l}function modalOrder_setPrototypeOf(t,r){return modalOrder_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,r){return t.__proto__=r,t},modalOrder_setPrototypeOf(t,r)}function modalOrder_createSuper(t){var r=function modalOrder_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var o,i=modalOrder_getPrototypeOf(t);if(r){var a=modalOrder_getPrototypeOf(this).constructor;o=Reflect.construct(i,arguments,a)}else o=i.apply(this,arguments);return function modalOrder_possibleConstructorReturn(t,r){if(r&&("object"===modalOrder_typeof(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function modalOrder_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,o)}}function modalOrder_getPrototypeOf(t){return modalOrder_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},modalOrder_getPrototypeOf(t)}var d=function(t){!function modalOrder_inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&modalOrder_setPrototypeOf(t,r)}(ModalOrder,t);var r=modalOrder_createSuper(ModalOrder);function ModalOrder(){var t;return function modalOrder_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,ModalOrder),(t=r.call(this)).PaymentType=0,t.events=new o,t}return function modalOrder_createClass(t,r,o){return r&&modalOrder_defineProperties(t.prototype,r),o&&modalOrder_defineProperties(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}(ModalOrder,[{key:"preOpenCallBack",value:function preOpenCallBack(){var t=this;this.PaymentType=0;var r=ensureElement("#order");this.paymentContent=cloneTemplate(r),this.nextButton=ensureElement(".order__button",this.paymentContent),this.buttonOnline=ensureElement("#card",this.paymentContent),this.buttonCash=ensureElement("#cash",this.paymentContent),this.buttonOnline.addEventListener("click",(function(){t.selectPaymentMethod(1)})),this.buttonCash.addEventListener("click",(function(){t.selectPaymentMethod(2)})),this.addressInput=ensureElement(".form__input",this.paymentContent),this.addressInput.addEventListener("input",(function(){t.updateNextButtonState()})),this.updateNextButtonState(),this._content.appendChild(this.paymentContent)}},{key:"updateNextButtonState",value:function updateNextButtonState(){0==this.PaymentType||""===this.addressInput.value?this.nextButton.disabled=!0:(this.nextButton.disabled=!1,this.openContacts())}},{key:"address",set:function set(t){this.addressInput.value=t,this.updateNextButtonState()}},{key:"selectPaymentMethod",value:function selectPaymentMethod(t){this.PaymentType=t,1===t?(this.buttonOnline.classList.add("button_alt-active"),this.buttonCash.classList.remove("button_alt-active"),this.updateNextButtonState()):2===t?(this.buttonOnline.classList.remove("button_alt-active"),this.buttonCash.classList.add("button_alt-active"),this.updateNextButtonState()):(this.buttonOnline.classList.remove("button_alt-active"),this.buttonCash.classList.remove("button_alt-active"),this.updateNextButtonState())}},{key:"orderInformation",value:function orderInformation(t){this.address=t.address}},{key:"openContacts",value:function openContacts(){var t=this;this.nextButton.addEventListener("click",(function(){var r="";1===t.PaymentType?r="онлайн":2===t.PaymentType&&(r="при получении");var o={address:t.addressInput.value,payment:r,total:t.modalInfo.total,items:t.modalInfo.items};t.close(),t.events.emit("openModalContacts",o)}))}},{key:"openInfo",value:function openInfo(t){this.modalInfo=t,this.open()}}]),ModalOrder}(a);function modalPreview_typeof(t){return modalPreview_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},modalPreview_typeof(t)}function modalPreview_defineProperties(t,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(a=i.key,l=void 0,l=function modalPreview_toPrimitive(t,r){if("object"!==modalPreview_typeof(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,r||"default");if("object"!==modalPreview_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(a,"string"),"symbol"===modalPreview_typeof(l)?l:String(l)),i)}var a,l}function modalPreview_setPrototypeOf(t,r){return modalPreview_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,r){return t.__proto__=r,t},modalPreview_setPrototypeOf(t,r)}function modalPreview_createSuper(t){var r=function modalPreview_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var o,i=modalPreview_getPrototypeOf(t);if(r){var a=modalPreview_getPrototypeOf(this).constructor;o=Reflect.construct(i,arguments,a)}else o=i.apply(this,arguments);return function modalPreview_possibleConstructorReturn(t,r){if(r&&("object"===modalPreview_typeof(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function modalPreview_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,o)}}function modalPreview_getPrototypeOf(t){return modalPreview_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},modalPreview_getPrototypeOf(t)}var y=function(t){!function modalPreview_inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&modalPreview_setPrototypeOf(t,r)}(ModalPreview,t);var r=modalPreview_createSuper(ModalPreview);function ModalPreview(){var t;return function modalPreview_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,ModalPreview),(t=r.call(this)).events=new o,t.modalBasket=new l,t.basketState=!1,t}return function modalPreview_createClass(t,r,o){return r&&modalPreview_defineProperties(t.prototype,r),o&&modalPreview_defineProperties(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}(ModalPreview,[{key:"preOpenCallBack",value:function preOpenCallBack(){var t=this,r=ensureElement("#card-preview");this.previewContent=cloneTemplate(r),this.titlePreview=ensureElement(".card__title",this.previewContent),this.textPreview=ensureElement(".card__text",this.previewContent),this.pricePreview=ensureElement(".card__price",this.previewContent),this.imagePreview=ensureElement(".card__image",this.previewContent),this.addButtonToBasket=ensureElement(".card__button",this.previewContent),this.categoryPreview=ensureElement(".card__category",this.previewContent),this._content.appendChild(this.previewContent),this.addButtonToBasket.addEventListener("click",(function(){t.basketState?t.events.emit("removeFromBasketClick",t.cardInterface):t.events.emit("addToBasketClick",t.cardInterface),t.close()}))}},{key:"updateButton",value:function updateButton(t){this.addButtonToBasket.innerText=t?"Удалить из корзины":"Добавить в корзину",this.basketState=t}},{key:"openForCard",value:function openForCard(t){this.open(),this.events.emit("infoLoarded",t),this.cardInterface=t,this.title=t.title,this.price=t.price,this.category=t.category,this.image=t.image,this.description=t.description}},{key:"addToBasket",value:function addToBasket(){}},{key:"title",set:function set(t){this.titlePreview.innerText=t}},{key:"price",set:function set(t){this.pricePreview.innerText="стоит  ".concat(t," синапсы")}},{key:"category",set:function set(t){this.categoryPreview.innerHTML=t}},{key:"image",set:function set(t){this.imagePreview.src=t}},{key:"description",set:function set(t){this.textPreview.innerText=t}}]),ModalPreview}(a);function modalPreviewPresenter_typeof(t){return modalPreviewPresenter_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},modalPreviewPresenter_typeof(t)}function modalPreviewPresenter_defineProperties(t,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(a=i.key,l=void 0,l=function modalPreviewPresenter_toPrimitive(t,r){if("object"!==modalPreviewPresenter_typeof(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,r||"default");if("object"!==modalPreviewPresenter_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(a,"string"),"symbol"===modalPreviewPresenter_typeof(l)?l:String(l)),i)}var a,l}var m=function(){function modalPreviewPresenter(t,r){!function modalPreviewPresenter_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,modalPreviewPresenter),this.modelRef=r,this.viewRef=t,this.viewRef.events.on("addToBasketClick",this.addItemToBasket.bind(this)),this.viewRef.events.on("removeFromBasketClick",this.deleteFromBasket.bind(this)),this.viewRef.events.on("infoLoarded",this.infoLoarded.bind(this))}return function modalPreviewPresenter_createClass(t,r,o){return r&&modalPreviewPresenter_defineProperties(t.prototype,r),o&&modalPreviewPresenter_defineProperties(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}(modalPreviewPresenter,[{key:"addItemToBasket",value:function addItemToBasket(t){this.modelRef.addToBasket(t)}},{key:"deleteFromBasket",value:function deleteFromBasket(t){this.modelRef.removeFromBasket(t)}},{key:"infoLoarded",value:function infoLoarded(t){this.viewRef.updateButton(this.modelRef.isInBasket(t))}}]),modalPreviewPresenter}();function modalSuccess_typeof(t){return modalSuccess_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},modalSuccess_typeof(t)}function modalSuccess_defineProperties(t,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(a=i.key,l=void 0,l=function modalSuccess_toPrimitive(t,r){if("object"!==modalSuccess_typeof(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,r||"default");if("object"!==modalSuccess_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(a,"string"),"symbol"===modalSuccess_typeof(l)?l:String(l)),i)}var a,l}function modalSuccess_setPrototypeOf(t,r){return modalSuccess_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,r){return t.__proto__=r,t},modalSuccess_setPrototypeOf(t,r)}function modalSuccess_createSuper(t){var r=function modalSuccess_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var o,i=modalSuccess_getPrototypeOf(t);if(r){var a=modalSuccess_getPrototypeOf(this).constructor;o=Reflect.construct(i,arguments,a)}else o=i.apply(this,arguments);return function modalSuccess_possibleConstructorReturn(t,r){if(r&&("object"===modalSuccess_typeof(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function modalSuccess_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,o)}}function modalSuccess_getPrototypeOf(t){return modalSuccess_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},modalSuccess_getPrototypeOf(t)}var v=function(t){!function modalSuccess_inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&modalSuccess_setPrototypeOf(t,r)}(ModalSuccess,t);var r=modalSuccess_createSuper(ModalSuccess);function ModalSuccess(){var t;return function modalSuccess_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,ModalSuccess),(t=r.call(this)).events=new o,t}return function modalSuccess_createClass(t,r,o){return r&&modalSuccess_defineProperties(t.prototype,r),o&&modalSuccess_defineProperties(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}(ModalSuccess,[{key:"preOpenCallBack",value:function preOpenCallBack(){var t=this,r=ensureElement("#success");this.successContent=cloneTemplate(r),this.totalPay=ensureElement(".order-success__description",this.successContent),this.closeButton=ensureElement(".order-success__close",this.successContent),this.closeButton.addEventListener("click",(function(){t.close()})),this.totalPay.innerText="Списано "+String(this.modalInfo.total)+" синапсов",this._content.appendChild(this.successContent)}},{key:"getTotalPrice",value:function getTotalPrice(){this.events.emit("getTotalPayment")}},{key:"openInfo",value:function openInfo(t){this.modalInfo=t,this.open()}}]),ModalSuccess}(a);function modalSuccessPresenter_typeof(t){return modalSuccessPresenter_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},modalSuccessPresenter_typeof(t)}function modalSuccessPresenter_defineProperties(t,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(a=i.key,l=void 0,l=function modalSuccessPresenter_toPrimitive(t,r){if("object"!==modalSuccessPresenter_typeof(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,r||"default");if("object"!==modalSuccessPresenter_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(a,"string"),"symbol"===modalSuccessPresenter_typeof(l)?l:String(l)),i)}var a,l}var b=function(){function modalSuccessPresenter(t,r){!function modalSuccessPresenter_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,modalSuccessPresenter),this.modelRef=r,this.viewRef=t,this.viewRef.events.on("getTotalPayment",this.getTotalPrice.bind(this))}return function modalSuccessPresenter_createClass(t,r,o){return r&&modalSuccessPresenter_defineProperties(t.prototype,r),o&&modalSuccessPresenter_defineProperties(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}(modalSuccessPresenter,[{key:"getTotalPrice",value:function getTotalPrice(){this.modelRef.getBasketTotalPtice()}}]),modalSuccessPresenter}();function model_typeof(t){return model_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},model_typeof(t)}function model_createForOfIteratorHelper(t,r){var o="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!o){if(Array.isArray(t)||(o=function model_unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return model_arrayLikeToArray(t,r);var o=Object.prototype.toString.call(t).slice(8,-1);"Object"===o&&t.constructor&&(o=t.constructor.name);if("Map"===o||"Set"===o)return Array.from(t);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return model_arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){o&&(t=o);var i=0,a=function F(){};return{s:a,n:function n(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function e(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){o=o.call(t)},n:function n(){var t=o.next();return c=t.done,t},e:function e(t){u=!0,l=t},f:function f(){try{c||null==o.return||o.return()}finally{if(u)throw l}}}}function model_arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var o=0,i=new Array(r);o<r;o++)i[o]=t[o];return i}function model_defineProperties(t,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(a=i.key,l=void 0,l=function model_toPrimitive(t,r){if("object"!==model_typeof(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,r||"default");if("object"!==model_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(a,"string"),"symbol"===model_typeof(l)?l:String(l)),i)}var a,l}var h=function(){function model(){!function model_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,model),this.basketList=[],this.api=new i(r,t)}return function model_createClass(t,r,o){return r&&model_defineProperties(t.prototype,r),o&&model_defineProperties(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}(model,[{key:"getCardList",value:function getCardList(){return["red","green","blue"]}},{key:"getCardInterface",value:function getCardInterface(){return this.api.getCardList()}},{key:"createCard",value:function createCard(t){return{id:"sdfsdf",title:t,price:555,description:"sdfsd",image:"https://trikky.ru/wp-content/blogs.dir/1/files/2020/08/20/65c499e3-cc15-4869-be70-5108ff619b61.jpeg",category:"софт-скилл",button:"sdfsd"}}},{key:"addToBasket",value:function addToBasket(t){this.basketList.push(t);var r,o=model_createForOfIteratorHelper(this.basketList);try{for(o.s();!(r=o.n()).done;)r.value}catch(t){o.e(t)}finally{o.f()}}},{key:"removeFromBasket",value:function removeFromBasket(t){var r=this.basketList.indexOf(t,0);r>-1&&this.basketList.splice(r,1)}},{key:"getBasketList",value:function getBasketList(){return this.basketList}},{key:"getBasketCount",value:function getBasketCount(){return this.basketList.length}},{key:"isInBasket",value:function isInBasket(t){return this.basketList.indexOf(t,0)>-1}},{key:"getBasketTotalPtice",value:function getBasketTotalPtice(){var t=0;return this.basketList.forEach((function(r){t+=r.price})),t}},{key:"sendOrder",value:function sendOrder(t){return this.api.orderProduct(t)}},{key:"clearBasket",value:function clearBasket(){this.basketList=[]}}]),model}();function modelOrderPresenter_typeof(t){return modelOrderPresenter_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},modelOrderPresenter_typeof(t)}function modelOrderPresenter_defineProperties(t,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(a=i.key,l=void 0,l=function modelOrderPresenter_toPrimitive(t,r){if("object"!==modelOrderPresenter_typeof(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,r||"default");if("object"!==modelOrderPresenter_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(a,"string"),"symbol"===modelOrderPresenter_typeof(l)?l:String(l)),i)}var a,l}function modelOrderPresenter_createClass(t,r,o){return r&&modelOrderPresenter_defineProperties(t.prototype,r),o&&modelOrderPresenter_defineProperties(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}var _=modelOrderPresenter_createClass((function modalOrderPresenter(t,r){!function modelOrderPresenter_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,modalOrderPresenter),this.modelRef=r,this.viewRef=t}));function Card_typeof(t){return Card_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Card_typeof(t)}function Card_defineProperties(t,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(a=i.key,l=void 0,l=function Card_toPrimitive(t,r){if("object"!==Card_typeof(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,r||"default");if("object"!==Card_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(a,"string"),"symbol"===Card_typeof(l)?l:String(l)),i)}var a,l}var P=function(){function Card(){!function Card_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,Card);var t=ensureElement("#card-catalog"),r=cloneTemplate(ensureElement("#card-preview")),o=cloneTemplate(t);this._HtmlItem=o,this._title=ensureElement(".card__title",o),this._price=ensureElement(".card__price",o),this._category=o.querySelector(".card__category"),this._button=o.querySelector(".card__button"),this._image=o.querySelector(".card__image"),this._description=ensureElement(".card__text",r)}return function Card_createClass(t,r,o){return r&&Card_defineProperties(t.prototype,r),o&&Card_defineProperties(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}(Card,[{key:"title",set:function set(t){this._title.innerText=t}},{key:"HtmlItem",get:function get(){return this._HtmlItem}},{key:"price",set:function set(t){this._price.innerText="стоит  ".concat(t," синапсы")}},{key:"category",set:function set(t){this._category.innerHTML=t}},{key:"image",set:function set(t){this._image.src=t}},{key:"description",set:function set(t){this._description.innerText=t}},{key:"openPreview",value:function openPreview(){this._HtmlItem.addEventListener("click",(function(){alert("ghbdtn")}))}}]),Card}();function page_typeof(t){return page_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},page_typeof(t)}function page_defineProperties(t,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(a=i.key,l=void 0,l=function page_toPrimitive(t,r){if("object"!==page_typeof(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,r||"default");if("object"!==page_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(a,"string"),"symbol"===page_typeof(l)?l:String(l)),i)}var a,l}var w=function(){function page(){var t=this;!function page_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,page),this.gallery=ensureElement(".gallery"),this.events=new o;var r=ensureElement(".header__basket");this.basketCounter=ensureElement(".header__basket-counter"),r.addEventListener("click",(function(){t.events.emit("basketClick")}))}return function page_createClass(t,r,o){return r&&page_defineProperties(t.prototype,r),o&&page_defineProperties(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}(page,[{key:"basketCount",set:function set(t){this.basketCounter.innerText=String(t)}},{key:"addCard",value:function addCard(t){var r=this,o=new P;o.category=t.category,o.description=t.description,o.image=t.image,o.price=t.price,o.title=t.title,this.gallery.appendChild(o.HtmlItem),o.HtmlItem.addEventListener("click",(function(){r.events.emit("cardClick",t)}))}},{key:"addCardFn",value:function addCardFn(t,r,o,i,a){var l=new P;l.category=t,l.description=i,l.image=a,l.price=o,l.title=r,this.gallery.appendChild(l.HtmlItem)}},{key:"init",value:function init(){var t=this;this.events.emit("page:init"),setInterval((function(){t.events.emit("intervalCounter")}),1e3)}}]),page}();function pagePresenter_typeof(t){return pagePresenter_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pagePresenter_typeof(t)}function pagePresenter_createForOfIteratorHelper(t,r){var o="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!o){if(Array.isArray(t)||(o=function pagePresenter_unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return pagePresenter_arrayLikeToArray(t,r);var o=Object.prototype.toString.call(t).slice(8,-1);"Object"===o&&t.constructor&&(o=t.constructor.name);if("Map"===o||"Set"===o)return Array.from(t);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return pagePresenter_arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){o&&(t=o);var i=0,a=function F(){};return{s:a,n:function n(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function e(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function s(){o=o.call(t)},n:function n(){var t=o.next();return c=t.done,t},e:function e(t){u=!0,l=t},f:function f(){try{c||null==o.return||o.return()}finally{if(u)throw l}}}}function pagePresenter_arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var o=0,i=new Array(r);o<r;o++)i[o]=t[o];return i}function pagePresenter_defineProperties(t,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(a=i.key,l=void 0,l=function pagePresenter_toPrimitive(t,r){if("object"!==pagePresenter_typeof(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,r||"default");if("object"!==pagePresenter_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(a,"string"),"symbol"===pagePresenter_typeof(l)?l:String(l)),i)}var a,l}var g=function(){function pagePresenter(t,r){!function pagePresenter_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,pagePresenter),this.modelRef=r,this.viewRef=t,this.test="hi from presenter",this.viewRef.events.on("page:init",this.viewInitCallBack.bind(this)),this.viewRef.events.on("intervalCounter",this.intervalCallBack.bind(this))}return function pagePresenter_createClass(t,r,o){return r&&pagePresenter_defineProperties(t.prototype,r),o&&pagePresenter_defineProperties(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}(pagePresenter,[{key:"viewInitCallBack",value:function viewInitCallBack(){var t=this;this.modelRef.getCardInterface().then((function(r){var o,i=pagePresenter_createForOfIteratorHelper(r);try{for(i.s();!(o=i.n()).done;){var a=o.value;t.viewRef.addCard(a)}}catch(t){i.e(t)}finally{i.f()}}),(function(t){}))}},{key:"intervalCallBack",value:function intervalCallBack(){this.viewRef.basketCount=this.modelRef.getBasketCount()}}]),pagePresenter}();function frontendAplication_typeof(t){return frontendAplication_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},frontendAplication_typeof(t)}function frontendAplication_defineProperties(t,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(a=i.key,l=void 0,l=function frontendAplication_toPrimitive(t,r){if("object"!==frontendAplication_typeof(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,r||"default");if("object"!==frontendAplication_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(a,"string"),"symbol"===frontendAplication_typeof(l)?l:String(l)),i)}var a,l}var k=function(){function frontendAplication(){var t=this;!function frontendAplication_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,frontendAplication),this.mainView=new w,this.appModel=new h,this.mainPresenter=new g(this.mainView,this.appModel),this.modalWindowPreview=new y,this.modalWindowPreviewPresenter=new m(this.modalWindowPreview,this.appModel),this.modalWindowOrder=new d,this.modalWindowOrderPresenter=new _(this.modalWindowOrder,this.appModel),this.modalWindowContact=new u,this.modalWindowContactPresenter=new p(this.modalWindowContact,this.appModel),this.modalWindowSuccess=new v,this.modalWindowSuccessPresenter=new b(this.modalWindowSuccess,this.appModel),this.mainView.events.on("cardClick",(function(r){t.modalWindowPreview.openForCard(r)})),this.modalWindowBasket=new l,this.modalWindowBasketPresenter=new c(this.modalWindowBasket,this.appModel),this.mainView.events.on("basketClick",(function(){t.modalWindowBasket.open(),t.modalWindowBasket.init()})),this.modalWindowBasket.events.on("confirm",(function(r){t.modalWindowOrder.openInfo(r)})),this.modalWindowOrder.events.on("openModalContacts",(function(r){t.modalWindowContact.openInfo(r)})),this.modalWindowContact.events.on("openModalSuccess",(function(r){t.modalWindowSuccess.openInfo(r)}))}return function frontendAplication_createClass(t,r,o){return r&&frontendAplication_defineProperties(t.prototype,r),o&&frontendAplication_defineProperties(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}(frontendAplication,[{key:"start",value:function start(){this.mainView.init()}}]),frontendAplication}();cloneTemplate("#card-preview"),new o,new i(r,t),ensureElement("#card-preview"),ensureElement("#card-basket"),ensureElement("#basket"),ensureElement("#order"),ensureElement("#contacts"),ensureElement("#success"),ensureElement("#modal-container"),document.body,ensureElement(".gallery");(new k).start()})();
//# sourceMappingURL=main.js.map